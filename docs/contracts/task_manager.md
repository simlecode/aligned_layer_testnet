 ## AlignedLayerTaskManager: 

The constructor of the [contract](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol) takes two parameters: `_registryCoordinator` of type `IBLSRegistryCoordinatorWithIndices` and `_taskResponseWindowBlock` of type `uint32`.

The [createNewTask function](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L83) takes `proof`, `pubInput`, `verifierId`, `quorumThresholdPercentage`, and `quorumNumbers` as parameters. It first creates a new task struct and assigns the current block number as the [taskCreatedBlock]( https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L95). It then calculates the hash of the task struct and stores it in the [allTaskHashes]( https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L100) mapping with the current `latestTaskNum` as the key. After that, a [NewTaskCreated event](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L101) is emitted with the `latestTaskNum` and the `newTask` struct, and finally, the `latestTaskNum` is incremented.

The [respondToTask function](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L106) responds to an existing task. It takes `task`, `taskResponse`, and `nonSignerStakesAndSignature` as parameters. First, it checks that the task is valid, hasn't been responded yet, and is being responded in time. Then it calculates a [message](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L134) based on the `taskResponse` and later checks the BLS signature. Afterwards, the function [checks](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L148) that signatories own at least a threshold percentage of each quorum. If the threshold percentage condition is met, the function [updates the storage](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L165) with the `taskResponse` and `taskResponseMetadata`. Finally, it emits an event [TaskResponded](https://github.com/yetanotherco/aligned_layer_testnet/blob/main/contracts/src/AlignedLayerTaskManager.sol#L170) indicating that the task response has been successfully recorded.
